# –ò—Ç–µ—Ä–∞—Ü–∏—è 6: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–æ–º–µ–Ω—É bibliaris.com

> **–î–∞—Ç–∞:** 2025-09-28  
> **–¶–µ–ª—å:** –û–±–µ—Å–ø–µ—á–∏—Ç—å HTTPS –¥–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é —á–µ—Ä–µ–∑ –¥–æ–º–µ–Ω bibliaris.com  
> **–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:** –ì–û–¢–û–í –ö –ù–ê–ß–ê–õ–£

## üìã –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è

‚úÖ **–í—ã–ø–æ–ª–Ω–µ–Ω–æ –≤ –ò—Ç–µ—Ä–∞—Ü–∏–∏ 5:**

- –°–µ—Ä–≤–µ—Ä –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
- Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –∏ –∏–º–µ–µ—Ç —Å—Ç–∞—Ç—É—Å `(healthy)`
- API –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –Ω–∞ `localhost:5000`
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üéØ –¶–µ–ª–∏ –∏—Ç–µ—Ä–∞—Ü–∏–∏

### –û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å

–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é —á–µ—Ä–µ–∑ –¥–æ–º–µ–Ω `bibliaris.com` —Å HTTPS

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ü–µ–ª–∏

1. **Reverse Proxy**: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Caddy
2. **DNS**: –ü–µ—Ä–µ–Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Namecheap –¥–ª—è –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
3. **HTTPS**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –æ—Ç Let's Encrypt
4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ª–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

## üìù –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω

### –≠—Ç–∞–ø 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Caddy (30 –º–∏–Ω)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Caddy
curl -1sLf 'https://dl.cloudsmith.io/public/caddy/stable/gpg.key' | sudo gpg --dearmor -o /usr/share/keyrings/caddy-stable-archive-keyring.gpg
curl -1sLf 'https://dl.cloudsmith.io/public/caddy/stable/debian.deb.txt' | sudo tee /etc/apt/sources.list.d/caddy-stable.list
sudo apt update && sudo apt install caddy

# –°–æ–∑–¥–∞–Ω–∏–µ Caddyfile
sudo nano /etc/caddy/Caddyfile
```

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ Caddyfile:**

```
bibliaris.com {
    reverse_proxy localhost:5000

    # –ó–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
    header {
        # –°–∫—Ä—ã—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–µ—Ä–≤–µ—Ä–µ
        -Server

        # Security headers
        Strict-Transport-Security "max-age=31536000; includeSubDomains"
        X-Content-Type-Options "nosniff"
        X-Frame-Options "DENY"
        X-XSS-Protection "1; mode=block"
        Referrer-Policy "strict-origin-when-cross-origin"
    }

    # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
    log {
        output file /var/log/caddy/bibliaris.com.log
        format json
    }
}
```

### –≠—Ç–∞–ø 2: DNS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ Namecheap (15 –º–∏–Ω)

**–î–µ–π—Å—Ç–≤–∏—è –≤ –ø–∞–Ω–µ–ª–∏ Namecheap:**

1. **–£–¥–∞–ª–∏—Ç—å URL Forward:**
   - –í–æ–π—Ç–∏ –≤ Namecheap Dashboard
   - –í—ã–±—Ä–∞—Ç—å –¥–æ–º–µ–Ω `bibliaris.com`
   - Domain List ‚Üí Manage
   - Redirects ‚Üí Delete URL Forward

2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å DNS –∑–∞–ø–∏—Å–∏:**
   - Advanced DNS ‚Üí Add New Record
   - Type: `A Record`
   - Host: `@`
   - Value: `209.74.88.183`
   - TTL: `Automatic`

3. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–ø–∏—Å–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
   - Type: `A Record`
   - Host: `www`
   - Value: `209.74.88.183`

### –≠—Ç–∞–ø 3: –ó–∞–ø—É—Å–∫ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (15 –º–∏–Ω)

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Caddy
sudo caddy validate --config /etc/caddy/Caddyfile

# –ó–∞–ø—É—Å–∫ Caddy
sudo systemctl enable caddy
sudo systemctl start caddy

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
sudo systemctl status caddy

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
sudo journalctl -u caddy -f
```

### –≠—Ç–∞–ø 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ (10 –º–∏–Ω)

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS propagation
nslookup bibliaris.com

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
curl -I https://bibliaris.com
curl -I https://bibliaris.com/api/health/liveness

# –ü—Ä–æ–≤–µ—Ä–∫–∞ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
openssl s_client -connect bibliaris.com:443 -servername bibliaris.com
```

## üîç –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

- [ ] `https://bibliaris.com` –¥–æ—Å—Ç—É–ø–µ–Ω –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- [ ] `https://bibliaris.com/api/health/liveness` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç HTTP 200
- [ ] SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤–∞–ª–∏–¥–Ω—ã–π –∏ –≤—ã–ø—É—â–µ–Ω Let's Encrypt
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç HTTP ‚Üí HTTPS —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] DNS –∑–∞–ø–∏—Å–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

## üö® –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### DNS Propagation

- **–ü—Ä–æ–±–ª–µ–º–∞**: DNS –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –≤—Å—Ç—É–ø–∏–ª–∏ –≤ —Å–∏–ª—É
- **–†–µ—à–µ–Ω–∏–µ**: –ñ–¥–∞—Ç—å –¥–æ 48 —á–∞—Å–æ–≤ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–Ω–µ—à–Ω–∏–µ DNS —Å–µ—Ä–≤–µ—Ä—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

### Let's Encrypt Rate Limits

- **–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä–µ–≤—ã—à–µ–Ω—ã –ª–∏–º–∏—Ç—ã –Ω–∞ –≤—ã–ø—É—Å–∫ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- **–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–ª–∏ –∂–¥–∞—Ç—å —Å–±—Ä–æ—Å–∞ –ª–∏–º–∏—Ç–æ–≤

### Firewall –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ—Ä—Ç—ã

- **–ü—Ä–æ–±–ª–µ–º–∞**: UFW –Ω–µ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç 80/443 –ø–æ—Ä—Ç—ã
- **–†–µ—à–µ–Ω–∏–µ**: `sudo ufw allow 80` –∏ `sudo ufw allow 443`

## üìä –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

- **–û–±—â–µ–µ –≤—Ä–µ–º—è:** ~70 –º–∏–Ω—É—Ç
- **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Caddy:** 30 –º–∏–Ω—É—Ç
- **DNS –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:** 15 –º–∏–Ω—É—Ç
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –∑–∞–ø—É—Å–∫:** 15 –º–∏–Ω—É—Ç
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** 10 –º–∏–Ω—É—Ç

## üîÑ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –¥–æ–º–µ–Ω–∞
2. **–ë—ç–∫–∞–ø—ã**: –í–∫–ª—é—á–∏—Ç—å Caddyfile –≤ —Å–∏—Å—Ç–µ–º—É –±—ç–∫–∞–ø–æ–≤
3. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –û–±–Ω–æ–≤–∏—Ç—å production deployment guide
4. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–∂–∞—Ç–∏–µ

---

**–°—Ç–∞—Ç—É—Å:** –ì–û–¢–û–í –ö –í–´–ü–û–õ–ù–ï–ù–ò–Æ  
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** Deploy Engineer  
**–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è:** ‚úÖ –í—Å–µ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
