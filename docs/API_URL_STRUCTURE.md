# API URL Structure - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

## üìã –¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### Swagger –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (–ë–ï–ó –ø—Ä–µ—Ñ–∏–∫—Å–∞ `/api`)

- **Swagger UI**: `https://api.bibliaris.com/docs`
- **OpenAPI JSON**: `https://api.bibliaris.com/docs-json`

### API endpoints (–° –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `/api`)

- **Health**: `https://api.bibliaris.com/api/health/liveness`
- **Metrics**: `https://api.bibliaris.com/api/metrics`
- **Business API**: `https://api.bibliaris.com/api/books`, `/api/auth/login`, etc.

## ‚úÖ –ü–æ—á–µ–º—É —ç—Ç–æ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ?

### 1. –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

```
/docs           ‚Üí –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤)
/docs-json      ‚Üí OpenAPI —Å—Ö–µ–º–∞ (–¥–ª—è –∫–æ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏)
/api/*          ‚Üí –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (–¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
```

### 2. –ü—Ä–æ—Å—Ç–æ–π –¥–æ—Å—Ç—É–ø –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

- –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –Ω–µ –Ω—É–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å `/api/docs` - –ø—Ä–æ—Å—Ç–æ `/docs`
- Swagger –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∫–æ—Ä–æ—Ç–∫–æ–º—É –∏ –ø–æ–Ω—è—Ç–Ω–æ–º—É URL
- OpenAPI —Å—Ö–µ–º–∞ –ª–µ–≥–∫–æ –Ω–∞–π—Ç–∏: `/docs-json`

### 3. –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞

–ú–Ω–æ–≥–∏–µ API –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø–æ—Ö–æ–∂—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:

- GitHub API: `api.github.com/`
- Stripe API: `api.stripe.com/`
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±—ã—á–Ω–æ –Ω–∞ –∫–æ—Ä–Ω–µ–≤–æ–º –ø—É—Ç–∏ –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–æ–º –¥–æ–º–µ–Ω–µ

### 4. –ì–∏–±–∫–æ—Å—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```typescript
// src/main.ts
SwaggerModule.setup('docs', app, document); // Swagger –ü–ï–†–ï–î –ø—Ä–µ—Ñ–∏–∫—Å–æ–º
app.setGlobalPrefix('api'); // –ü—Ä–µ—Ñ–∏–∫—Å —Ç–æ–ª—å–∫–æ –¥–ª—è API
```

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç:

- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –¥—Ä—É–≥–∏–µ —Å–ª—É–∂–µ–±–Ω—ã–µ endpoints –±–µ–∑ –ø—Ä–µ—Ñ–∏–∫—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä `/admin-panel`)
- –ò–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å API endpoints –ø–æ–¥ –æ–±—â–∏–º –ø—Ä–µ—Ñ–∏–∫—Å–æ–º
- –£–ø—Ä–æ—Å—Ç–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é –≤ Caddy/Nginx

### 5. –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏

- **openapi-typescript**: `https://api.bibliaris.com/docs-json`
- **Swagger UI**: –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ `/docs`
- **Postman/Insomnia**: –ú–æ–≥—É—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ö–µ–º—É –∏–∑ `/docs-json`

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### NestJS Setup (src/main.ts)

```typescript
async function bootstrap() {
  const app = await NestFactory.create(AppModule);

  // 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Swagger –ë–ï–ó –ø—Ä–µ—Ñ–∏–∫—Å–∞
  if (swaggerEnabled) {
    SwaggerModule.setup('docs', app, document, {
      jsonDocumentUrl: 'docs-json',
    });
  }

  // 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –ø—Ä–µ—Ñ–∏–∫—Å–∞ –¥–ª—è API
  app.setGlobalPrefix('api');

  await app.listen(5000);
}
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏:

```
GET /docs           ‚Üí Swagger UI
GET /docs-json      ‚Üí OpenAPI JSON
GET /api/books      ‚Üí Books API
GET /api/auth/login ‚Üí Auth API
GET /api/health/*   ‚Üí Health checks
```

## üåê –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ (—á–µ–ª–æ–≤–µ–∫)

```bash
# –û—Ç–∫—Ä—ã—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
open https://api.bibliaris.com/docs

# –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ API
curl https://api.bibliaris.com/api/health/liveness
```

### –î–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ (–∫–æ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è)

```bash
# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å TypeScript —Ç–∏–ø—ã
yarn openapi:types:prod
# ‚Üí –ó–∞–≥—Ä—É–∂–∞–µ—Ç https://api.bibliaris.com/docs-json

# –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
yarn openapi:types
# ‚Üí –ó–∞–≥—Ä—É–∂–∞–µ—Ç http://localhost:5000/docs-json
```

### –î–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (Postman/Insomnia)

```
Import OpenAPI Spec:
URL: https://api.bibliaris.com/docs-json
```

## üîÑ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã (–ù–ï –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è)

### ‚ùå –í–∞—Ä–∏–∞–Ω—Ç 1: –í—Å—ë –ø–æ–¥ `/api`

```
/api/docs       ‚Üí Swagger
/api/docs-json  ‚Üí OpenAPI
/api/books      ‚Üí Books API
```

**–ú–∏–Ω—É—Å—ã**: –î–ª–∏–Ω–Ω–µ–µ, –º–µ–Ω–µ–µ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ, docs —Å–º–µ—à–∞–Ω–∞ —Å API

### ‚ùå –í–∞—Ä–∏–∞–Ω—Ç 2: Docs –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–º –¥–æ–º–µ–Ω–µ

```
docs.bibliaris.com  ‚Üí Swagger
api.bibliaris.com   ‚Üí API
```

**–ú–∏–Ω—É—Å—ã**: –ù—É–∂–µ–Ω –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –¥–æ–º–µ–Ω, —Å–ª–æ–∂–Ω–µ–µ CORS, –∏–∑–±—ã—Ç–æ—á–Ω–æ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞

### ‚úÖ –í–∞—Ä–∏–∞–Ω—Ç 3: –¢–µ–∫—É—â–∏–π (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

```
/docs           ‚Üí Swagger (–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
/docs-json      ‚Üí OpenAPI (—Å—Ö–µ–º–∞)
/api/*          ‚Üí API (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
```

**–ü–ª—é—Å—ã**: –ß–∏—Å—Ç–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ, –∫–æ—Ä–æ—Ç–∫–∏–µ URL, —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ü—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

1. –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π `/docs-json` –¥–ª—è –∫–æ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
2. Swagger UI –Ω–∞ `/docs` –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
3. API endpoints –≤—Å–µ–≥–¥–∞ —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `/api/*`

### –ü—Ä–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–∏

1. Swagger –º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å —á–µ—Ä–µ–∑ `SWAGGER_ENABLED=0`
2. API endpoints –æ—Å—Ç–∞–Ω—É—Ç—Å—è –Ω–∞ `/api/*` –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç Swagger
3. Health checks –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω—ã: `/api/health/*`

### –ü—Ä–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

1. **Frontend**: `https://api.bibliaris.com/docs-json` ‚Üí —Ç–∏–ø—ã
2. **Mobile**: `https://api.bibliaris.com/api/*` ‚Üí HTTP –∫–ª–∏–µ–Ω—Ç
3. **Third-party**: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ `https://api.bibliaris.com/docs`

## üéØ –í—ã–≤–æ–¥

**–¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–ø—Ç–∏–º–∞–ª—å–Ω–∞ –ø–æ—Ç–æ–º—É —á—Ç–æ:**

- ‚úÖ –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏ API
- ‚úÖ –ö–æ—Ä–æ—Ç–∫–∏–µ –∏ –ø–æ–Ω—è—Ç–Ω—ã–µ URL –¥–ª—è docs
- ‚úÖ –ï–¥–∏–Ω—ã–π –ø—Ä–µ—Ñ–∏–∫—Å `/api` –¥–ª—è –≤—Å–µ—Ö –±–∏–∑–Ω–µ—Å-—ç–Ω–¥–ø–æ–π–Ω—Ç–æ–≤
- ‚úÖ –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ –≤ –∏–Ω–¥—É—Å—Ç—Ä–∏–∏
- ‚úÖ –õ–µ–≥–∫–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–∞ —Å–æ –≤—Å–µ–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏

**–ú–µ–Ω—è—Ç—å –Ω–∏—á–µ–≥–æ –Ω–µ –Ω—É–∂–Ω–æ!** üéâ
