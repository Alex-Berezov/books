# Changelog

–í—Å–µ –∑–∞–º–µ—Ç–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É—é—Ç—Å—è –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ.

–§–æ—Ä–º–∞—Ç: –î–∞—Ç–∞ ‚Äî –ö—Ä–∞—Ç–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ ‚Äî –î–µ—Ç–∞–ª–∏.

## 2025-10-12 ‚Äî –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ SBOM generation –≤ CI/CD pipeline

- **–ü—Ä–æ–±–ª–µ–º–∞**: SBOM generation –ø–∞–¥–∞–ª —Å –æ—à–∏–±–∫–æ–π "syft failed with exit code 1"
- **–ü—Ä–∏—á–∏–Ω–∞**: `anchore/sbom-action` –ø–æ–ª—É—á–∞–ª –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–µ–≥–æ–≤ –≤–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ–≥–∞ –æ–±—Ä–∞–∑–∞
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**:
  - ‚úÖ –ò–∑–º–µ–Ω—ë–Ω `image` parameter —Å `${{ steps.meta.outputs.tags }}` –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ–≥
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `continue-on-error: true` –¥–ª—è SBOM –∏ Security Scan steps
  - ‚úÖ –¢–µ–ø–µ—Ä—å –æ—à–∏–±–∫–∏ SBOM/—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç –¥–µ–ø–ª–æ–π
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: Pipeline –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É –¥–∞–∂–µ –µ—Å–ª–∏ SBOM generation –Ω–µ —É–¥–∞–ª—Å—è
- **–§–∞–π–ª—ã**:
  - `.github/workflows/deploy.yml` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã SBOM –∏ Security Scan steps

## 2025-10-12 ‚Äî –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ permissions –¥–ª—è GitHub Container Registry

- **–ü—Ä–æ–±–ª–µ–º–∞**: Build Docker Image –ø–∞–¥–∞–ª —Å –æ—à–∏–±–∫–æ–π "denied: installation not allowed to Create organization package"
- **–ü—Ä–∏—á–∏–Ω–∞**: –£ GitHub Actions –Ω–µ –±—ã–ª–æ –ø—Ä–∞–≤ –Ω–∞ push –æ–±—Ä–∞–∑–æ–≤ –≤ GitHub Container Registry (ghcr.io)
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**:
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã `permissions` –≤ build job: `contents: read`, `packages: write`
  - ‚úÖ –¢–µ–ø–µ—Ä—å workflow –º–æ–∂–µ—Ç –ø—É—à–∏—Ç—å Docker –æ–±—Ä–∞–∑—ã –≤ ghcr.io
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: Docker –æ–±—Ä–∞–∑—ã —É—Å–ø–µ—à–Ω–æ –ø—É–±–ª–∏–∫—É—é—Ç—Å—è –≤ GHCR –ø—Ä–∏ –∫–∞–∂–¥–æ–º –¥–µ–ø–ª–æ–µ
- **–§–∞–π–ª—ã**:
  - `.github/workflows/deploy.yml` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è permissions –≤ build job

## 2025-10-12 ‚Äî –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Jest –∑–∞–≤–∏—Å–∞–Ω–∏—è –ø–æ—Å–ª–µ E2E —Ç–µ—Å—Ç–æ–≤

- **–ü—Ä–æ–±–ª–µ–º–∞**: Jest –Ω–µ –∑–∞–≤–µ—Ä—à–∞–ª—Å—è –ø–æ—Å–ª–µ e2e —Ç–µ—Å—Ç–æ–≤ —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º "Jest did not exit one second after the test run has completed"
- **–ü—Ä–∏—á–∏–Ω–∞**: BullMQ –≤–æ—Ä–∫–µ—Ä—ã –∏ Redis —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –æ—Å—Ç–∞—é—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—ã–º–∏ –ø–æ—Å–ª–µ `app.close()`, Jest –∂–¥—ë—Ç –∏—Ö –∑–∞–∫—Ä—ã—Ç–∏—è
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**:
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Ñ–ª–∞–≥ `--forceExit` –≤ —Å–∫—Ä–∏–ø—Ç—ã `test:e2e` –∏ `test:e2e:serial`
  - ‚úÖ Jest —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: CI/CD pipeline –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–æ–≤, –±–µ–∑ –∑–∞–≤–∏—Å–∞–Ω–∏—è
- **–§–∞–π–ª—ã**:
  - `package.json` - –æ–±–Ω–æ–≤–ª–µ–Ω—ã e2e —Å–∫—Ä–∏–ø—Ç—ã —Å —Ñ–ª–∞–≥–æ–º `--forceExit`

## 2025-10-12 ‚Äî –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ E2E —Ç–µ—Å—Ç–∞ –æ—á–µ—Ä–µ–¥–µ–π: –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Redis

- **–ü—Ä–æ–±–ª–µ–º–∞**: –¢–µ—Å—Ç `queues.e2e-spec.ts` –ø–∞–¥–∞–ª –≤ CI, —Ö–æ—Ç—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ Redis –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- **–ü—Ä–∏—á–∏–Ω–∞**: –¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä—è–ª –Ω–∞–ª–∏—á–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è, –Ω–æ –Ω–µ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫—É—é –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Redis
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**:
  - ‚úÖ –ó–∞–º–µ–Ω–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `hasRedis` (—á–µ—Ä–µ–∑ env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ) –Ω–∞ `queuesEnabled` (—á–µ—Ä–µ–∑ API `/queues/status`)
  - ‚úÖ –¢–µ—Å—Ç —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç **—Ñ–∞–∫—Ç–∏—á–µ—Å–∫—É—é** –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –æ—á–µ—Ä–µ–¥–µ–π, –∞ –Ω–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –¢–µ—Å—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Redis –∏ –Ω–µ –ø–∞–¥–∞–µ—Ç –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ–º Redis
- **–§–∞–π–ª—ã**:
  - `test/queues.e2e-spec.ts` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Redis

## 2025-10-12 ‚Äî –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ E2E —Ç–µ—Å—Ç–æ–≤: BullMQ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

- **–ü—Ä–æ–±–ª–µ–º–∞**: E2E —Ç–µ—Å—Ç—ã –ø–∞–¥–∞–ª–∏ –≤ GitHub Actions —Å –æ—à–∏–±–∫–æ–π "BullMQ: Your redis options maxRetriesPerRequest must be null"
- **–ü—Ä–∏—á–∏–Ω–∞**: BullMQ —Ç—Ä–µ–±—É–µ—Ç `maxRetriesPerRequest: null` –¥–ª—è –±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (Worker, QueueEvents)
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**:
  - ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `maxRetriesPerRequest: null` –≤ `buildConnectionOpts()` –¥–ª—è –æ–±—ä–µ–∫—Ç–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ Redis
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ `maxRetriesPerRequest: null` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞ –∏–∑ —Å—Ç—Ä–æ–∫–æ–≤–æ–≥–æ URL
  - ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω `onModuleDestroy` lifecycle hook –≤ `QueueModule` –¥–ª—è graceful shutdown –≤–æ—Ä–∫–µ—Ä–æ–≤, –æ—á–µ—Ä–µ–¥–µ–π –∏ Redis –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
  - ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω `.env.test.example` —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ –æ Redis –¥–ª—è —Ç–µ—Å—Ç–æ–≤
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: E2E —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –≤ CI —Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º Redis
- **–§–∞–π–ª—ã**:
  - `src/modules/queue/queue.module.ts` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Redis –∏ –¥–æ–±–∞–≤–ª–µ–Ω lifecycle hook
  - `.env.test.example` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ Redis —Å –ø–æ—è—Å–Ω–µ–Ω–∏—è–º–∏

## 2025-10-12 ‚Äî –ò—Ç–µ—Ä–∞—Ü–∏—è 7: –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è –∏ –æ—á–∏—Å—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (–ó–ê–í–ï–†–®–ï–ù–û)

- **–ü–û–õ–ù–û–°–¢–¨–Æ –ó–ê–í–ï–†–®–ï–ù–ê** - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã production –∏ –æ—á–∏—â–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**:
  - ‚úÖ **DATABASE_URL**: URL-–∫–æ–¥–∏—Ä–æ–≤–∞–Ω –ø–∞—Ä–æ–ª—å (`/` ‚Üí `%2F`, `=` ‚Üí `%3D`) –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã Prisma
  - ‚úÖ **Docker port mapping**: –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –ø–æ—Ä—Ç 5000 –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ Caddy –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é
  - ‚úÖ **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã**: –û–±–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (app, postgres) –≤ —Å—Ç–∞—Ç—É—Å–µ `(healthy)`
- **–ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ URL** (–≤—Å–µ —Ä–∞–±–æ—Ç–∞—é—Ç):
  - ‚úÖ https://bibliaris.com/api/health/liveness - HTTP 200
  - ‚úÖ https://bibliaris.com/api/health/readiness - HTTP 200
  - ‚úÖ https://bibliaris.com/docs - HTTP 200, Swagger UI –¥–æ—Å—Ç—É–ø–µ–Ω
  - ‚úÖ https://bibliaris.com/api/metrics - HTTP 200, Prometheus –º–µ—Ç—Ä–∏–∫–∏
- **–û—á–∏—Å—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏**:
  - –£–¥–∞–ª–µ–Ω—ã —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ —Ñ–∞–π–ª—ã: `TEMP_SESSION_STATUS.md`, `docs/ITERATION_7_DOMAIN_APPLY.md`, `docs/CURRENT_PRODUCTION_STATE.md`, `docs/PROD_CONFIG_GUIDE.md`, `docs/CONTEXT.md`, `docs/TASKS.md`
  - –û—Å—Ç–∞–≤–ª–µ–Ω—ã —Ç–æ–ª—å–∫–æ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –¥–ª—è AI-–∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- **–°—Ç–∞—Ç—É—Å production**: ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω, –≤—Å–µ —Å–∏—Å—Ç–µ–º—ã —Ä–∞–±–æ—Ç–∞—é—Ç

## 2025-10-05 ‚Äî –ò—Ç–µ—Ä–∞—Ü–∏—è 7: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–æ–º–µ–Ω–∞ bibliaris.com (–ù–ê–ß–ê–õ–û)

- **–£–°–ü–ï–®–ù–û –ó–ê–í–ï–†–®–ï–ù–ê** - –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–Ω–æ–π –≤ –ò—Ç–µ—Ä–∞—Ü–∏–∏ 6 —Å–∏—Å—Ç–µ–º—ã –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ HTTPS –¥–æ—Å—Ç—É–ø–∞ –∫ bibliaris.com
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ü—Ä–µ–≤—Ä–∞—â–µ–Ω URL Forward –≤ –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–µ—Ä—É 209.74.88.183 —Å HTTPS
- **–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è**:
  - ‚úÖ **DNS —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω**: bibliaris.com ‚Üí 209.74.88.183
  - ‚úÖ **Caddy —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π HTTPS –∏ reverse proxy
  - ‚úÖ **SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –ø–æ–ª—É—á–µ–Ω**: –≤–∞–ª–∏–¥–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –æ—Ç Let's Encrypt –¥–æ 03.01.2026
  - ‚úÖ **API –ø–æ–ª–Ω–æ—Å—Ç—å—é –¥–æ—Å—Ç—É–ø–µ–Ω**: https://bibliaris.com/api/* —Ä–∞–±–æ—Ç–∞–µ—Ç
  - ‚úÖ **–ó–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**: HSTS, XSS Protection, Content-Type Options
  - ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç**: HTTP ‚Üí HTTPS
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: DNS propagation –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å –∑–∞ –Ω–µ–¥–µ–ª—é, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ Caddy ~15 –º–∏–Ω—É—Ç
- **–§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞**: –í—Å–µ API endpoints (liveness, readiness) —Ä–∞–±–æ—Ç–∞—é—Ç —Å HTTPS
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ bibliaris.com –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω –≤ production

## 2025-09-28 ‚Äî –ò—Ç–µ—Ä–∞—Ü–∏—è 6: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–æ–º–µ–Ω—É bibliaris.com (–ó–ê–í–ï–†–®–ï–ù–û)

- **–°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ HTTPS –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–æ–º–µ–Ω—É bibliaris.com**:
  - `setup_bibliaris_caddy.sh` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Caddy (170+ —Å—Ç—Ä–æ–∫)
  - `check_bibliaris.sh` - –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –¥–æ–º–µ–Ω–∞ (220+ —Å—Ç—Ä–æ–∫)
  - `execute_iteration_6.sh` - –≥–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤ (350+ —Å—Ç—Ä–æ–∫)
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏**:
  - `DNS_SETUP_INSTRUCTIONS.md` - –ø–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ DNS –≤ Namecheap
  - `Caddyfile.bibliaris` - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è bibliaris.com
- **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã**:
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ Caddy —Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ HTTPS —Å Let's Encrypt —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏
  - –ó–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (HSTS, XSS Protection, Frame Options)
  - –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ DNS, SSL, –ø–æ—Ä—Ç–æ–≤ –∏ API endpoints
- **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ production**: –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≥–æ—Ç–æ–≤—ã –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ—Å—Ç—É–ø–∞ —á–µ—Ä–µ–∑ bibliaris.com
- **–°—Ç–∞—Ç—É—Å**: –ò—Ç–µ—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞, —Å–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é

## 2025-09-28 ‚Äî –ò—Ç–µ—Ä–∞—Ü–∏—è 5: –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ (–ó–ê–í–ï–†–®–ï–ù–û)

- **–ü—Ä–æ–≤–µ–¥–µ–Ω–∞ –ø–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ production —Å–µ—Ä–≤–µ—Ä–∞** bibliaris.com (209.74.88.183):
  - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ SSH, –∞–Ω–∞–ª–∏–∑ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
  - **–ù–ê–ô–î–ï–ù–ê –ò –ò–°–ü–†–ê–í–õ–ï–ù–ê –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞**: –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π healthcheck –ø—É—Ç—å –≤ docker-compose.prod.yml
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: `/metrics` ‚Üí `/api/metrics` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ healthcheck
  - **–†–µ–∑—É–ª—å—Ç–∞—Ç**: Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–∑–º–µ–Ω–∏–ª —Å—Ç–∞—Ç—É—Å —Å `(unhealthy)` –Ω–∞ `(healthy)` ‚úÖ
- **–°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è**:
  - `docs/CURRENT_PRODUCTION_STATE.md` - –ø–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
  - Backup –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: —Å–æ–∑–¥–∞–Ω–∞ —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è `docker-compose.prod.yml.backup`
- **–ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω –ø–ª–∞–Ω —Å–ª–µ–¥—É—é—â–µ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏**:
  - `docs/ITERATION_6_DOMAIN_ACCESS.md` - –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Caddy –∏ DNS
  - –û–±–Ω–æ–≤–ª–µ–Ω `docs/NEXT_STEPS_DEPLOYMENT.md` —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- **–°—Ç–∞—Ç—É—Å**: –°–µ—Ä–≤–µ—Ä —Å—Ç–∞–±–∏–ª–µ–Ω, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ, –≥–æ—Ç–æ–≤ –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –¥–æ–º–µ–Ω–∞

## 2025-09-28 ‚Äî –ò—Ç–µ—Ä–∞—Ü–∏—è 4: –ü–µ—Ä–≤—ã–π –¥–µ–ø–ª–æ–π - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ production —Å–µ—Ä–≤–µ—Ä–∞ (–ó–ê–í–ï–†–®–ï–ù–û)

- **–°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è production –¥–µ–ø–ª–æ—è** (–ü—É–Ω–∫—Ç—ã 13, 16, 17 DEPLOYMENT.md):
  - `scripts/setup_server.sh` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ VPS —Å–µ—Ä–≤–µ—Ä–∞ (500+ —Å—Ç—Ä–æ–∫)
  - `scripts/deploy_production.sh` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π —Å –æ—Ç–∫–∞—Ç–æ–º (650+ —Å—Ç—Ä–æ–∫)
  - `scripts/health_check.sh` - –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ (450+ —Å—Ç—Ä–æ–∫)
- **CI/CD pipeline**: `.github/workflows/deploy.yml` - –ø–æ–ª–Ω—ã–π workflow —Å —Ç–µ—Å—Ç–∞–º–∏, —Å–±–æ—Ä–∫–æ–π, –¥–µ–ø–ª–æ–µ–º –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –∫–æ–º–∞–Ω–¥—ã**:
  - `docs/DEPLOYMENT_CHECKLIST.md` - –¥–µ—Ç–∞–ª—å–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç –∏–∑ 22 —ç—Ç–∞–ø–æ–≤ (300+ —Å—Ç—Ä–æ–∫)
  - `docs/PRODUCTION_DEPLOYMENT_GUIDE.md` - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –¥–µ–ø–ª–æ—é (500+ —Å—Ç—Ä–æ–∫)
  - `.env.prod.template` - template —Å–æ –≤—Å–µ–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
- **VS Code –∑–∞–¥–∞—á–∏**: –¥–æ–±–∞–≤–ª–µ–Ω—ã –∑–∞–¥–∞—á–∏ –¥–ª—è –¥–µ–ø–ª–æ—è (`deploy:*`, `health:*`)
- **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã –¥–µ–ø–ª–æ—è**:
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ VPS: Docker, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, –±—ç–∫–∞–ø—ã
  - –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–µ–ø–ª–æ–π: —Å–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞ ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∏ ‚Üí –æ—Ç–∫–∞—Ç –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö
  - Health checks: 8+ –ø—Ä–æ–≤–µ—Ä–æ–∫ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–æ–π
  - GitHub Actions: –ø–æ–ª–Ω—ã–π CI/CD —Å —Ç–µ—Å—Ç–∞–º–∏, —Å–±–æ—Ä–∫–æ–π –æ–±—Ä–∞–∑–æ–≤ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –¥–µ–ø–ª–æ–µ–º
- –ó–∞–≤–µ—Ä—à–µ–Ω—ã **–ü—É–Ω–∫—Ç—ã 13, 16, 17 –∏–∑ DEPLOYMENT.md**, —Å–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

## 2025-09-27 ‚Äî –°–∏—Å—Ç–µ–º–∞ –±—ç–∫–∞–ø–æ–≤: –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–ò—Ç–µ—Ä–∞—Ü–∏—è 2)

- **–°–æ–∑–¥–∞–Ω–∞ –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –±—ç–∫–∞–ø–æ–≤** (–ü—É–Ω–∫—Ç 14 DEPLOYMENT.md):
  - `scripts/backup_database.sh` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–æ–≤ PostgreSQL –∏ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤
  - `scripts/restore_database.sh` - –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å —Ä–µ–∑–µ—Ä–≤–Ω—ã–º –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
  - `scripts/test_backup.sh` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –≤—Å–µ—Ö –∞—Å–ø–µ–∫—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã –±—ç–∫–∞–ø–æ–≤ (10+ —Ç–µ—Å—Ç–æ–≤)
  - `scripts/setup_backup_cron.sh` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è —á–µ—Ä–µ–∑ cron
  - `docs/BACKUP_GUIDE.md` - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –±—ç–∫–∞–ø–∞–º (300+ —Å—Ç—Ä–æ–∫)
- **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã –±—ç–∫–∞–ø–æ–≤**:
  - –¢—Ä–∏ —Ç–∏–ø–∞ –±—ç–∫–∞–ø–æ–≤: daily/weekly/monthly —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–æ—Ç–∞—Ü–∏–µ–π (14 –¥–Ω–µ–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Docker –∏ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ PostgreSQL (–∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ)
  - –°–∂–∞—Ç–∏–µ –±—ç–∫–∞–ø–æ–≤ (gzip) –∏ –±—ç–∫–∞–ø –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤ (tar.gz)
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏: —Ä–∞–∑–º–µ—Ä—ã, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ SQL, —Å–∂–∞—Ç—ã–µ –∞—Ä—Ö–∏–≤—ã, —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ
  - –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å —Å–æ–∑–¥–∞–Ω–∏–µ–º backup'–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**:
  - –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ cron: daily 02:00, weekly –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ 03:00, monthly 1-–µ —á–∏—Å–ª–æ 04:00
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –∫–∞–∂–¥—ã–π –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ –≤ 06:00
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ .env.backup —Ñ–∞–π–ª
  - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å —Ä–æ—Ç–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ logrotate
- **VS Code –∑–∞–¥–∞—á–∏**: `backup:create`, `backup:restore`, `backup:test`, `backup:setup-cron`
- –ó–∞–≤–µ—Ä—à–µ–Ω **–ü—É–Ω–∫—Ç 14 –∏–∑ DEPLOYMENT.md**, –≥–æ—Ç–æ–≤ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —ç—Ç–∞–ø—É (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º)

## 2025-09-27 ‚Äî –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞: –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (–ò—Ç–µ—Ä–∞—Ü–∏—è 1)

- **–°–æ–∑–¥–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä–∞** (–ü—É–Ω–∫—Ç 12 DEPLOYMENT.md):
  - `scripts/setup_security.sh` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
  - `scripts/test_security.sh` - –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
  - `configs/ufw-rules.txt` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–∞–≤–∏–ª firewall —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º
  - `docs/SECURITY_GUIDE.md` - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**:
  - SSH: –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π, —Ç–æ–ª—å–∫–æ –∫–ª—é—á–∏, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ–ø—ã—Ç–æ–∫ (MaxAuthTries 3)
  - UFW Firewall: —Ä–∞–∑—Ä–µ—à–µ–Ω—ã —Ç–æ–ª—å–∫–æ –ø–æ—Ä—Ç—ã 22, 80, 443; –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –ë–î –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã
  - fail2ban: –∑–∞—â–∏—Ç–∞ –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞ SSH –∏ –≤–µ–±-–∞—Ç–∞–∫, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–∞ 1 —á–∞—Å –ø–æ—Å–ª–µ 3-5 –ø–æ–ø—ã—Ç–æ–∫
  - unattended-upgrades: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å deploy: —Å –ø—Ä–∞–≤–∞–º–∏ sudo –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º–∏ –ª–∏–º–∏—Ç–∞–º–∏
  - –î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞: `/opt/books/{app,uploads,backups,logs}` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏
  - –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏: sysctl –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –ª–∏–º–∏—Ç—ã —Ä–µ—Å—É—Ä—Å–æ–≤
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**: —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç 10+ –∞—Å–ø–µ–∫—Ç–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –ó–∞–≤–µ—Ä—à–µ–Ω **–ü—É–Ω–∫—Ç 12 –∏–∑ DEPLOYMENT.md**, –≥–æ—Ç–æ–≤ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —ç—Ç–∞–ø—É (–±—ç–∫–∞–ø—ã)

## 2025-09-27 ‚Äî –†–µ–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è DEPLOYMENT.md –∏ –ø–ª–∞–Ω –∏—Ç–µ—Ä–∞—Ü–∏–π

- **–†–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–æ–≤–∞–Ω `DEPLOYMENT.md`**:
  - –ü—É–Ω–∫—Ç—ã –ø–µ—Ä–µ–æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω—ã –≤ –ª–æ–≥–∏—á–µ—Å–∫–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
  - –î–æ–±–∞–≤–ª–µ–Ω—ã —Å—Ç–∞—Ç—É—Å—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ, ‚è≥ –ì–æ—Ç–æ–≤–æ –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é, ‚ùå –ù–µ –Ω–∞—á–∞—Ç–æ
  - –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —ç—Ç–∞–ø–∞–º: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚Üí –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ‚Üí –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ ‚Üí –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
- **–°–æ–∑–¥–∞–Ω –ø–ª–∞–Ω –∏—Ç–µ—Ä–∞—Ü–∏–π**: `docs/NEXT_STEPS_DEPLOYMENT.md`
  - –ß–µ—Ç–∫–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å ‚Üí –ë—ç–∫–∞–ø—ã ‚Üí –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º ‚Üí –î–µ–ø–ª–æ–π
  - –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á –¥–ª—è –∫–∞–∂–¥–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏
- **–û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ README.md**:
  - –ù–æ–≤–∞—è —Å–µ–∫—Ü–∏—è "üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è" —Å –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–µ–π
  - –í—ã–¥–µ–ª–µ–Ω—ã deployment-–¥–æ–∫—É–º–µ–Ω—Ç—ã –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω—ã–µ
- **–û—á–∏—Å—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏**:
  - –£–¥–∞–ª–µ–Ω `docs/NEXT_STEPS_MONITORING.md` (–≤—Å–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã)
  - –û—Å–Ω–æ–≤–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ: `docs/MONITORING_GUIDE.md`
- –¢–µ–∫—É—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å: **4/21 –ø—É–Ω–∫—Ç–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω—ã** (19% –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É)

## 2025-09-27 ‚Äî –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞: Prometheus + Grafana + AlertManager

- **–°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞** (–ü—É–Ω–∫—Ç 11 DEPLOYMENT.md):
  - `docker-compose.monitoring.yml` - Prometheus, Grafana, AlertManager, Node Exporter
  - `configs/prometheus.yml` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫ –∏–∑ NestJS `/api/metrics`
  - `configs/alert_rules.yml` - –ø—Ä–∞–≤–∏–ª–∞ –∞–ª–µ—Ä—Ç–æ–≤ (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ/–ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—é—â–∏–µ)
  - `configs/alertmanager.yml` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (email/Slack)
- **–î–∞—à–±–æ—Ä–¥—ã Grafana**:
  - NestJS Application Dashboard - HTTP –º–µ—Ç—Ä–∏–∫–∏, response times, error rates
  - System Resources Dashboard - CPU, –ø–∞–º—è—Ç—å, –¥–∏—Å–∫, —Å–µ—Ç—å
  - Error Monitoring Dashboard - —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—à–∏–±–æ–∫
- **–°–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏**:
  - `scripts/setup_monitoring.sh` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
  - `scripts/test_monitoring.sh` - –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: `docs/MONITORING_GUIDE.md` - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- **VS Code –∑–∞–¥–∞—á–∏**: –¥–æ–±–∞–≤–ª–µ–Ω—ã –∑–∞–¥–∞—á–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º
- **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**: `.env.monitoring` –∏ –æ–±–Ω–æ–≤–ª–µ–Ω `.env.example`
- –ó–∞–≤–µ—Ä—à–µ–Ω **–ü—É–Ω–∫—Ç 11 –∏–∑ DEPLOYMENT.md**, –≥–æ—Ç–æ–≤ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —ç—Ç–∞–ø—É

## 2025-09-27 ‚Äî Reverse Proxy: Caddy –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **–°–æ–∑–¥–∞–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Caddy** (`configs/Caddyfile.prod`):
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π HTTPS —á–µ—Ä–µ–∑ Let's Encrypt —Å HSTS –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏
  - Reverse proxy `api.example.com` ‚Üí `localhost:5000`
  - Rate limiting: 100 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É –Ω–∞ IP, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ `/api/metrics` –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
  - –ó–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏: XSS, CSRF, Frame-Options protection
  - JSON –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–æ—Ç–∞—Ü–∏–µ–π (100MB, 5 —Ñ–∞–π–ª–æ–≤)
- **–°–æ–∑–¥–∞–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏**:
  - `scripts/install_caddy.sh` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Caddy –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
  - `scripts/test_reverse_proxy.sh` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ reverse proxy
- **–û–±–Ω–æ–≤–ª–µ–Ω `docker-compose.prod.yml`**: —É–±—Ä–∞–Ω –ø—É–±–ª–∏—á–Ω—ã–π –ø–æ—Ä—Ç 5000 (–¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Caddy)
- **–û–±–Ω–æ–≤–ª–µ–Ω `.env.prod`**: CORS –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –¥–æ–º–µ–Ω–æ–≤ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- **–°–æ–∑–¥–∞–Ω–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ**: `docs/REVERSE_PROXY_GUIDE.md` —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
- –ó–∞–≤–µ—Ä—à–µ–Ω **–ü—É–Ω–∫—Ç 7 –∏–∑ DEPLOYMENT.md**, –≥–æ—Ç–æ–≤ –∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥—É –∏ –±—ç–∫–∞–ø–∞–º

## 2025-09-27 ‚Äî –ü—Ä–æ–¥–∞–∫—à–Ω –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

- **–°–æ–∑–¥–∞–Ω `.env.prod`** —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:
  - `NODE_ENV=production`, `SWAGGER_ENABLED=0`, `RATE_LIMIT_GLOBAL_ENABLED=1`, `TRUST_PROXY=1`
  - –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ JWT —Å–µ–∫—Ä–µ—Ç—ã (44+ —Å–∏–º–≤–æ–ª–∞, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã openssl)
  - –ü—Ä–æ–¥–∞–∫—à–Ω `DATABASE_URL` —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º `books_app` –∏ —Å–∏–ª—å–Ω—ã–º –ø–∞—Ä–æ–ª–µ–º
  - CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞, rate limiting –≤–∫–ª—é—á–µ–Ω
- **–û–±–Ω–æ–≤–ª–µ–Ω `docker-compose.prod.yml`**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `.env.prod`, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω healthcheck –Ω–∞ `/api/metrics`
- **–°–æ–∑–¥–∞–Ω—ã —É—Ç–∏–ª–∏—Ç—ã**: `test_prod_settings.sh` –∏ `check_prod_config.js` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- **–ü—Ä–æ–≤–µ—Ä–µ–Ω—ã —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã**: `/api/metrics`, `/api/health/liveness`, `/api/health/readiness` —Å—É—â–µ—Å—Ç–≤—É—é—Ç –∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞**: `.env.prod` –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ 600 (—Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü –º–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å)
- –ó–∞–≤–µ—Ä—à–µ–Ω **–ü—É–Ω–∫—Ç 6 –∏–∑ DEPLOYMENT.md**, –≥–æ—Ç–æ–≤ –∫ –ø–µ—Ä–µ—Ö–æ–¥—É –∫ Reverse Proxy

## 2025-08-25 ‚Äî –ö–∞—Ç–µ–≥–æ—Ä–∏–∏: –∏–µ—Ä–∞—Ä—Ö–∏—è

- –î–æ–±–∞–≤–ª–µ–Ω self-relation `Category.parentId` + –∏–Ω–¥–µ–∫—Å, –º–∏–≥—Ä–∞—Ü–∏—è `20250825140000_add_category_hierarchy`.
- –°–µ—Ä–≤–∏—Å/–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä: create/update —Å `parentId`, –∑–∞–ø—Ä–µ—Ç —Ü–∏–∫–ª–æ–≤/—Å–∞–º–æ–ø—Ä–∏–≤—è–∑–∫–∏, –∑–∞–ø—Ä–µ—Ç —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –¥–µ—Ç–µ–π.
- –ù–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã: `GET /categories/:id/children`, `GET /categories/tree`.
- Swagger: –æ–±—â–∏–π DTO `CategoryTreeNodeDto` –¥–ª—è –¥–µ—Ä–µ–≤–∞ –∏ –¥–µ—Ç–µ–π.
- E2E: —Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ `test/categories.e2e-spec.ts` (–¥–µ—Ç–∏, –¥–µ—Ä–µ–≤–æ, –∑–∞–ø—Ä–µ—Ç —É–¥–∞–ª–µ–Ω–∏—è —Ä–æ–¥–∏—Ç–µ–ª—è, –ø–µ—Ä–µ–Ω–æ—Å –≤–µ—Ç–∫–∏).
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞: `README.md`, `docs/ITERATION_TASKS.md`, –¥–æ–±–∞–≤–ª–µ–Ω `docs/AGENT_CONTEXT.md`.

## 2025-08-25 ‚Äî –¢–µ–≥–∏ –∏ Prisma –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

## 2025-08-26 ‚Äî –ú–µ–¥–∏–∞-–±–∏–±–ª–∏–æ—Ç–µ–∫–∞ (MVP)

- –î–æ–±–∞–≤–ª–µ–Ω–∞ –º–æ–¥–µ–ª—å `MediaAsset` (key @unique, url, meta, createdById?, isDeleted) –∏ —Å–≤—è–∑—å —Å `User`.
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω `MediaModule` —Å —Ä—É—á–∫–∞–º–∏:
  - `POST /media/confirm` ‚Äî –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ/—Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –ø–æ key –∏–∑ `/uploads` (–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ).
  - `GET /media` ‚Äî –ª–∏—Å—Ç–∏–Ω–≥ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ `q`, `type`, –ø–∞–≥–∏–Ω–∞—Ü–∏—è.
  - `DELETE /media/:id` ‚Äî soft-delete + –ø–æ–ø—ã—Ç–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞.
- –î–æ—Å—Ç—É–ø –∫ –º–µ–¥–∏–∞-—Ä—É—á–∫–∞–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω —Ä–æ–ª—è–º–∏ admin|content_manager.
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: –æ–±–Ω–æ–≤–ª—ë–Ω `docs/ITERATION_TASKS.md` (–∑–∞–¥–∞—á–∞ 23 –æ—Ç–º–µ—á–µ–Ω–∞ –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–∞—è, –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—á–∞–Ω–∏—è –∏ –ø–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –º–∏–≥—Ä–∞—Ü–∏—è–º).

- –î–æ–±–∞–≤–ª–µ–Ω—ã –º–æ–¥–µ–ª–∏ `Tag` –∏ `BookTag` –≤ Prisma, —Å–≤—è–∑—å `BookVersion.tags`. –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã CRUD —Ç–µ–≥–æ–≤ –∏ –ø—Ä–∏–≤—è–∑–∫–∞/–æ—Ç–≤—è–∑–∫–∞ –∫ –≤–µ—Ä—Å–∏—è–º, –ø—É–±–ª–∏—á–Ω–∞—è –≤—ã–±–æ—Ä–∫–∞ –ø–æ —Å–ª–∞–≥—É —Ç–µ–≥–∞. –î–æ–±–∞–≤–ª–µ–Ω –º–æ–¥—É–ª—å `TagsModule` –∏ e2e `test/tags.e2e-spec.ts`.
- –ú–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Å –¥—É–±–ª–∏—Ä—É—é—â–∏–º–∏—Å—è –∏–Ω–¥–µ–∫—Å–∞–º–∏ `Like_*` —Ä–µ—à–µ–Ω—ã –ø—É—Ç—ë–º –∑–∞–º–µ–Ω—ã `CREATE UNIQUE INDEX` –Ω–∞ `CREATE UNIQUE INDEX IF NOT EXISTS` –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –º–∏–≥—Ä–∞—Ü–∏—è—Ö, –ø–æ—Å–ª–µ —á–µ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω dev reset –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π.
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤–µ—Ä—Å–∏–∏ Prisma: `prisma` 6.14.0, `@prisma/client` 6.14.0. –í `schema.prisma` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `generator client { output = "../node_modules/.prisma/client" }`.
- README –¥–æ–ø–æ–ª–Ω–µ–Ω —Ä–∞–∑–¥–µ–ª–æ–º –æ –≤–µ—Ä—Å–∏—è—Ö Prisma, output –∏ —Ç—Ä–æ–±–ª—à—É—Ç–∏–Ω–≥–µ –º–∏–≥—Ä–∞—Ü–∏–π.

## 2025-08-26 ‚Äî –Ø–∑—ã–∫–∏: –ø–æ–ª–∏—Ç–∏–∫–∞ –≤—ã–±–æ—Ä–∞ –∏ —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å

- –î–æ–±–∞–≤–ª–µ–Ω–∞ —É—Ç–∏–ª–∏—Ç–∞ `shared/language/language.util.ts` (–ø–∞—Ä—Å–µ—Ä Accept-Language, –ø–æ–ª–∏—Ç–∏–∫–∞ —Ä–µ–∑–æ–ª–≤–∏–Ω–≥–∞: `?lang` ‚Üí Accept-Language ‚Üí DEFAULT_LANGUAGE).
- –ü—Ä–∏–º–µ–Ω–µ–Ω–æ –≤ `GET /books/:slug/overview`, –∞ —Ç–∞–∫–∂–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–æ –Ω–∞ `GET /categories/:slug/books` –∏ `GET /tags/:slug/books` (—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —è–∑—ã–∫—É, `availableLanguages` –≤ –æ—Ç–≤–µ—Ç–µ, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `?lang` –∏ `Accept-Language`).
- E2E: `test/language-policy.e2e-spec.ts` –∏ `test/language-policy-categories-tags.e2e-spec.ts` –ø—Ä–æ–≤–µ—Ä—è—é—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∏ —Ñ–æ–ª–±—ç–∫–∏.
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞: README (—Ä–∞–∑–¥–µ–ª –ø—Ä–æ —è–∑—ã–∫–∏), `docs/ITERATION_TASKS.md` (–ø–æ–º–µ—á–µ–Ω–æ –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ), ADR `docs/adr/2025-08-26-language-policy-and-extensibility.md` (—Ä–µ—à–µ–Ω–∏–µ ‚Äî –æ—Å—Ç–∞—Ç—å—Å—è –Ω–∞ Prisma enum `Language`).
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è e2e –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–∞ –Ω–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π —Ä–µ–∂–∏–º (`maxWorkers: 1` –≤ `test/jest-e2e.json`) –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –≤ dev-—Å—Ä–µ–¥–µ.
- –î–æ–ø–æ–ª–Ω–µ–Ω–∏–µ: –ø—É–±–ª–∏—á–Ω—ã–π –ª–∏—Å—Ç–∏–Ω–≥ `GET /books/:bookId/versions` —Ç–µ–ø–µ—Ä—å —É—á–∏—Ç—ã–≤–∞–µ—Ç `Accept-Language`, –µ—Å–ª–∏ `?language` –Ω–µ –∑–∞–¥–∞–Ω. –î–æ–±–∞–≤–ª–µ–Ω—ã README-–ø—Ä–∏–º–µ—Ä—ã –∏ e2e `test/book-versions-list-language.e2e-spec.ts`.

## 2025-08-30 ‚Äî –ú—É–ª—å—Ç–∏—Å–∞–π—Ç i18n: –∞–¥–º–∏–Ω-–∫–æ–Ω—Ç–µ–∫—Å—Ç —è–∑—ã–∫–∞ (–ª–∏—Å—Ç–∏–Ω–≥–∏/—Å–æ–∑–¥–∞–Ω–∏–µ)

- –î–æ–±–∞–≤–ª–µ–Ω –∑–∞–≥–æ–ª–æ–≤–æ–∫ `X-Admin-Language` (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–µ–µ `:lang` –≤ –ø—É—Ç–∏ –∞–¥–º–∏–Ω–∫–∏) –¥–ª—è –µ–¥–∏–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —è–∑—ã–∫–∞.
- Pages (admin):
  - `GET /admin/:lang/pages` ‚Äî —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–º—É —è–∑—ã–∫—É.
  - `POST /admin/:lang/pages` ‚Äî —è–∑—ã–∫ –±–µ—Ä—ë—Ç—Å—è –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞; –ø–æ–ª–µ `language` –≤ DTO —Å–¥–µ–ª–∞–Ω–æ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –∏ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏.
- BookVersions (admin):
  - `GET /admin/:lang/books/:bookId/versions` ‚Äî –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–º—É —è–∑—ã–∫—É; `?language` –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç.
  - `POST /admin/:lang/books/:bookId/versions` ‚Äî –Ω–æ–≤—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç —Å–æ–∑–¥–∞–Ω–∏—è –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–º –∞–¥–º–∏–Ω-—è–∑—ã–∫–µ.
- –°–µ—Ä–≤–∏—Å—ã —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω—ã: –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥—É–±–ª–µ–π –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —É—á–∏—Ç—ã–≤–∞—é—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π —è–∑—ã–∫.
- –û–±–Ω–æ–≤–ª—ë–Ω Swagger (–æ–ø–∏—Å–∞–Ω–∏—è –∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫ `X-Admin-Language`).

## 2025-08-30 ‚Äî –ú—É–ª—å—Ç–∏—Å–∞–π—Ç i18n: SEO resolve –ø–æ —è–∑—ã–∫—É

- –î–æ–±–∞–≤–ª–µ–Ω —É—á—ë—Ç —è–∑—ã–∫–∞ –≤ –ø—É–±–ª–∏—á–Ω–æ–º —Ä–µ–∑–æ–ª–≤–µ—Ä–µ SEO:
  - –ù–æ–≤—ã–π –º–∞—Ä—à—Ä—É—Ç: `GET /:lang/seo/resolve` (—è–∑—ã–∫ –ø—É—Ç–∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–µ–µ `lang` –∏ `Accept-Language`).
  - –†–∞—Å—à–∏—Ä–µ–Ω –º–∞—Ä—à—Ä—É—Ç: `GET /seo/resolve?type=book|version|page&id=...&lang=...` + –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Accept-Language`.
- –ü—Ä–∞–≤–∏–ª–∞ canonical:
  - `version` ‚Äî –≤—Å–µ–≥–¥–∞ –±–µ–∑ –ø—Ä–µ—Ñ–∏–∫—Å–∞: `/versions/:id`.
  - `book`/`page` ‚Äî —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º —è–∑—ã–∫–∞: `/:lang/books/:slug`, `/:lang/pages/:slug`.
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è: –º–µ—Ç–æ–¥ `resolvePublic` –≤ `SeoService`; –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –ø–æ–ª—É—á–∏–ª –º–∞—Ä—à—Ä—É—Ç—ã –∏ Swagger-–¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã.
- E2E: –¥–æ–±–∞–≤–ª–µ–Ω `test/seo-i18n.e2e-spec.ts` (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø—É—Ç–∏, –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π canonical).

## 2025-08-30 ‚Äî –¢–∞–∫—Å–æ–Ω–æ–º–∏–∏ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–≤–æ–¥—ã (CategoryTranslation/TagTranslation)

- Prisma: –¥–æ–±–∞–≤–ª–µ–Ω—ã –º–æ–¥–µ–ª–∏ `CategoryTranslation` –∏ `TagTranslation`; —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å slug –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∞ –≤ –ø–µ—Ä–µ–≤–æ–¥—ã (`@@unique([language, slug])`), –Ω–∞ –±–∞–∑–æ–≤—ã—Ö `Category.slug`/`Tag.slug` —Å–Ω—è—Ç–∞ `@unique`. –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω–¥–µ–∫—Å—ã –∏ –æ–±—Ä–∞—Ç–Ω—ã–µ —Å–≤—è–∑–∏.
- –ü—É–±–ª–∏—á–Ω—ã–µ —Ä—É—á–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π/—Ç–µ–≥–æ–≤ —Ä–µ–∑–æ–ª–≤—è—Ç –ø–æ `(language, slug)` –ø–µ—Ä–µ–≤–æ–¥–∞; –º–∞—Ä—à—Ä—É—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ `/:lang/categories/:slug/books` –∏ `/:lang/tags/:slug/books`.
- –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å: —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã legacy-–º–∞—Ä—à—Ä—É—Ç—ã –±–µ–∑ –ø—Ä–µ—Ñ–∏–∫—Å–∞ —è–∑—ã–∫–∞ ‚Äî `GET /categories/:slug/books` –∏ `GET /tags/:slug/books`; —è–∑—ã–∫ –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –ø–æ `?lang` –∏–ª–∏ `Accept-Language`.
- –ê–¥–º–∏–Ω-CRUD –ø–µ—Ä–µ–≤–æ–¥–æ–≤:
  - `GET/POST /categories/:id/translations`, `PATCH/DELETE /categories/:id/translations/:language`.
  - `GET/POST /tags/:id/translations`, `PATCH/DELETE /tags/:id/translations/:language`.
- Seed: –∞–≤—Ç–æ–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (en) –¥–ª—è –±–∞–∑–æ–≤—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π; upsert –ø–æ slug –∑–∞–º–µ–Ω—ë–Ω –Ω–∞ `findFirst` + `create` –∏–∑-–∑–∞ —Å–Ω—è—Ç–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞ –±–∞–∑–æ–≤–æ–º slug.
- README/ENDPOINTS –æ–±–Ω–æ–≤–ª–µ–Ω—ã.

## 2025-09-05 ‚Äî Dev-–≤–æ—Ä–∫—Ñ–ª–æ—É: Husky + lint-staged + pre-commit

- –î–æ–±–∞–≤–ª–µ–Ω—ã dev-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: husky, lint-staged.
- –î–æ–±–∞–≤–ª–µ–Ω —Å–∫—Ä–∏–ø—Ç `prepare` –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Husky.
- –°–æ–∑–¥–∞–Ω —Ö—É–∫ `.husky/pre-commit`: –∑–∞–ø—É—Å–∫–∞–µ—Ç `lint-staged` (eslint --fix + prettier) –∏ –±—ã—Å—Ç—Ä—ã–π `yarn typecheck`.
- –í `package.json`:
  - –î–æ–±–∞–≤–ª–µ–Ω —Å–∫—Ä–∏–ø—Ç `typecheck` (`tsc --noEmit`).
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è `lint-staged` —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ –¥–ª—è `*.{ts,tsx,js}` –∏ `*.{md,yml,yaml,json}`.
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞: `docs/ITERATION_TASKS.md` (–ø—É–Ω–∫—Ç 1 –≤—ã–ø–æ–ª–Ω–µ–Ω), README –¥–æ–ø–æ–ª–Ω–µ–Ω —Ä–∞–∑–¥–µ–ª–æ–º –æ pre-commit –ø—Ä–æ–≤–µ—Ä–∫–∞—Ö.

## 2025-09-05 ‚Äî VS Code –∑–∞–¥–∞—á–∏ (.vscode/tasks.json)

- –î–æ–±–∞–≤–ª–µ–Ω —Ñ–∞–π–ª `.vscode/tasks.json` —Å –∑–∞–¥–∞—á–∞–º–∏: `dev`, `lint`, `typecheck`, `test:e2e`, `test:e2e:serial`, `prisma:generate`, `prisma:migrate`, `prisma:seed`, `prisma:studio`.
- –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã problem matchers: `$eslint-stylish` –¥–ª—è lint, `$tsc` –¥–ª—è typecheck. –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –ø–æ–º–µ—á–µ–Ω—ã `isBackground`.
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `docs/ITERATION_TASKS.md` (–ø. ¬´2 ‚Äî VS Code –∑–∞–¥–∞—á–∏¬ª –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–π), README ‚Äî —Ä–∞–∑–¥–µ–ª ¬´VS Code –∑–∞–¥–∞—á–∏¬ª.

## 2025-09-05 ‚Äî README –∞–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è

- –î–æ–ø–æ–ª–Ω–µ–Ω README: —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è, –±—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫, —Ä–∞–∑–¥–µ–ª `.env` —Å –∫–ª—é—á–∞–º–∏ –∏ –¥–µ—Ñ–æ–ª—Ç–∞–º–∏, –∑–∞–º–µ—Ç–∫–∏ –ø–æ —Ç–µ—Å—Ç–∞–º, —Ä–∞–∑–¥–µ–ª –ø—Ä–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã `/static` –∏ –ª–æ–∫–∞–ª—å–Ω—ã–µ –∑–∞–≥—Ä—É–∑–∫–∏, —É—Ç–æ—á–Ω–µ–Ω–∏–µ –ø–æ Swagger (`/api/docs-json`).
- –¶–µ–ª—å ‚Äî —á—Ç–æ–±—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –º–æ–≥ –ø–æ–¥–Ω—è—Ç—å –ø—Ä–æ–µ–∫—Ç –±–µ–∑ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ –≤–Ω–µ—à–Ω–∏–º –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º.

## 2025-09-05 ‚Äî Docker Compose (dev): Postgres + Redis

- –î–æ–±–∞–≤–ª–µ–Ω `docker-compose.yml` —Å —Å–µ—Ä–≤–∏—Å–∞–º–∏ Postgres 14 –∏ Redis 7 (alpine), healthchecks –∏ volume `postgres_data`.
- –û–±–Ω–æ–≤–ª—ë–Ω `.env.example`: `DATABASE_URL` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ compose (postgres/postgres), –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `POSTGRES_DB|USER|PASSWORD|PORT`, `REDIS_PORT` –¥–ª—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π.
- README: –Ω–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª ¬´–ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose (dev)¬ª —Å —à–∞–≥–∞–º–∏ `docker compose up -d` ‚Üí `yarn prisma:migrate` ‚Üí `yarn prisma:generate` ‚Üí `yarn start:dev`.
- –¶–µ–ª—å ‚Äî –µ–¥–∏–Ω–∞—è –ª–æ–∫–∞–ª—å–Ω–∞—è —Å—Ä–µ–¥–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞ –±–µ–∑ —Ä—É—á–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ë–î/Redis.

## 2025-09-05 ‚Äî DevContainer –∏ Makefile –∞–ª–∏–∞—Å—ã

- –î–æ–±–∞–≤–ª–µ–Ω `.devcontainer/` (VS Code): `devcontainer.json` + –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π `docker-compose.devcontainer.yml` —Å —Å–µ—Ä–≤–∏—Å–æ–º `app` (Node 22). –ê–≤—Ç–æ–∫–æ–º–∞–Ω–¥–∞ `yarn && yarn prisma:generate` –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è.
- –î–æ–±–∞–≤–ª–µ–Ω `Makefile` —Å –∞–ª–∏–∞—Å–∞–º–∏: `up/down/logs/ps`, `migrate/generate/seed`, `dev`, `reset`, `prisma-studio`.
- README –¥–æ–ø–æ–ª–Ω–µ–Ω —Ä–∞–∑–¥–µ–ª–∞–º–∏ ¬´VS Code Dev Container¬ª –∏ ¬´Makefile –∞–ª–∏–∞—Å—ã¬ª.
- –¢—é–Ω–∏–Ω–≥ DevContainer: –¥–æ–±–∞–≤–ª–µ–Ω—ã `NODE_OPTIONS=--enable-source-maps --max-old-space-size=4096`, bash –∫–∞–∫ —Ç–µ—Ä–º–∏–Ω–∞–ª –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ `ms-azuretools.vscode-docker`.
- Makefile –¥–æ–ø–æ–ª–Ω–µ–Ω —Ü–µ–ª—è–º–∏ `lint`, `typecheck`, `e2e`, `e2e-serial`.

## 2025-09-05 ‚Äî AGENT_CONTEXT –∏ –∏–Ω–∂–µ–Ω–µ—Ä–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞

- –î–æ–±–∞–≤–ª–µ–Ω –¥–æ–∫—É–º–µ–Ω—Ç `docs/AGENT_CONTEXT.md`: –∑–æ–ª–æ—Ç—ã–µ –ø—Ä–∞–≤–∏–ª–∞, –∫–æ–Ω—Ç—Ä–∞–∫—Ç –∏—Ç–µ—Ä–∞—Ü–∏–∏, —Å—Ç–∏–ª—å –∏ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –º–∏–≥—Ä–∞—Ü–∏–∏ Prisma, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è, VS Code –∑–∞–¥–∞—á–∏, —à–∞–±–ª–æ–Ω PR, –≥—Ä–∞–Ω–∏—Ü—ã/–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –±—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã.
- –û–±–Ω–æ–≤–ª—ë–Ω README (—Å—Å—ã–ª–∫–∞ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç) –∏ `docs/ITERATION_TASKS.md` (–ø. 12.4 –ø–æ–º–µ—á–µ–Ω –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º —Å –¥–µ—Ç–∞–ª—è–º–∏).

## 2025-09-05 ‚Äî .env.example —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ

-

## 2025-09-06 ‚Äî BullMQ (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –±–∞–∑–æ–≤–∞—è)

- –î–æ–±–∞–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ `bullmq` –∏ `ioredis`.
- –ù–æ–≤—ã–π –º–æ–¥—É–ª—å `QueueModule`: –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Redis –∏–∑ env, –æ—á–µ—Ä–µ–¥—å `demo`, `Worker` —Å –ø—Ä–æ—Å—Ç—ã–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–º, —Å–µ—Ä–≤–∏—Å –∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä.
- –ê–¥–º–∏–Ω-—Ä—É—á–∫–∏: `GET /queues/status`, `GET /queues/demo/stats`, `POST /queues/demo/enqueue`.
- Health/Readiness: Redis-–ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–º–µ–Ω–µ–Ω–∞ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π `PING` —á–µ—Ä–µ–∑ `ioredis` (–µ—Å–ª–∏ Redis –Ω–∞—Å—Ç—Ä–æ–µ–Ω), –∏–Ω–∞—á–µ `skipped`.
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: README (—Ä–∞–∑–¥–µ–ª –ø—Ä–æ –æ—á–µ—Ä–µ–¥–∏), `.env.example` (`REDIS_*`, `BULLMQ_*`), `docs/ENDPOINTS.md` (—Ä—É—á–∫–∏ –æ—á–µ—Ä–µ–¥–µ–π), `docs/ITERATION_TASKS.md` (–ø–æ–º–µ—á–µ–Ω–æ –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ).

### 2025-09-06 ‚Äî SecurityModule –∏ –≤–æ—Ä–∫–µ—Ä BullMQ: –¥–æ—Ä–∞–±–æ—Ç–∫–∏

- SecurityModule —Ç–µ–ø–µ—Ä—å —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç `JwtAuthGuard` –≤–º–µ—Å—Ç–µ —Å `RolesGuard` –¥–ª—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö.
- –î–æ—Ä–∞–±–æ—Ç–∞–Ω –¥–µ–º–æ‚Äë–≤–æ—Ä–∫–µ—Ä BullMQ:
  - –ü–æ–¥–¥–µ—Ä–∂–∞–Ω `BULLMQ_WORKER_LOG_LEVEL` (debug|info|warn|error) –∏ `BULLMQ_WORKER_SHUTDOWN_TIMEOUT_MS` (—Ç–∞–π–º–∞—É—Ç graceful shutdown, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 5000 –º—Å).
  - –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å `BULLMQ_IN_PROCESS_WORKER`: `0|false` ‚Äî –≤—ã–∫–ª—é—á–∏—Ç—å in‚Äëprocess –≤–æ—Ä–∫–µ—Ä (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–∫–ª—é—á—ë–Ω).
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞: README ‚Äî —Ä–∞–∑–¥–µ–ª ¬´Shared modules: Prisma/Security¬ª –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤–æ—Ä–∫–µ—Ä–∞; `.env.example` –¥–æ–ø–æ–ª–Ω–µ–Ω –Ω–æ–≤—ã–º–∏ –∫–ª—é—á–∞–º–∏; `docs/ENDPOINTS.md` ‚Äî –ø—Ä–∏–º–µ—á–∞–Ω–∏—è –∫ –æ—á–µ—Ä–µ–¥—è–º.

## 2025-09-05 ‚Äî –Æ–Ω–∏—Ç‚Äë—Ç–µ—Å—Ç—ã: –∫–æ–Ω—Ç–µ–Ω—Ç–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ (–∫–Ω–∏–≥–∏ –∏ –≤–µ—Ä—Å–∏–∏)

- –î–æ–±–∞–≤–ª–µ–Ω—ã unit‚Äë—Ç–µ—Å—Ç—ã —Å–æ–≥–ª–∞—Å–Ω–æ –ø–ª–∞–Ω—É (–∏—Ç–µ—Ä–∞—Ü–∏—è 3):
  - `src/modules/book/book.service.spec.ts` ‚Äî –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä overview (—è–∑—ã–∫–æ–≤–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞, SEO‚Äë—Ñ–æ–ª–±—ç–∫–∏, —Ñ–ª–∞–≥–∏ –Ω–∞–ª–∏—á–∏—è —Ä–∞–∑–¥–µ–ª–æ–≤).
  - `src/modules/book-version/book-version.service.spec.ts` ‚Äî –¥–æ–ø. —Å—Ü–µ–Ω–∞—Ä–∏–∏: list —Å Accept-Language, publish/unpublish, getPublic –¥–ª—è draft = 404, listAdmin –±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞ –ø–æ —Å—Ç–∞—Ç—É—Å—É.
  - `src/modules/book-summary/book-summary.service.spec.ts` ‚Äî getByVersion (404 –Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â—É—é –≤–µ—Ä—Å–∏—é) –∏ upsert (create/update).

## 2025-09-06 ‚Äî –ü—Ä–æ–¥: Dockerfile –∏ docker-compose.prod

- –î–æ–±–∞–≤–ª–µ–Ω `Dockerfile` (multi-stage: builder ‚Üí runner) —Å –ø—Ä–æ–¥-–æ–∫—Ä—É–∂–µ–Ω–∏–µ–º –∏ –∑–∞–ø—É—Å–∫–æ–º —á–µ—Ä–µ–∑ `scripts/docker-entrypoint.sh`.
- –î–æ–±–∞–≤–ª–µ–Ω `docker-compose.prod.yml` –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ prod-–ø–æ–¥–æ–±–Ω–æ–π —Å–≤—è–∑–∫–∏ `app + postgres`.
- –î–æ–±–∞–≤–ª–µ–Ω `.dockerignore` –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å–±–æ—Ä–∫–∏.
- –ù–∞–ø–∏—Å–∞–Ω—ã unit-—Ç–µ—Å—Ç—ã –¥–ª—è devops-–∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤: `src/devops/dockerfiles.spec.ts` (–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –Ω–∞–ª–∏—á–∏–µ –∏ –∫–ª—é—á–µ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∫–æ–Ω—Ñ–∏–≥–æ–≤).
- README –¥–æ–ø–æ–ª–Ω–µ–Ω —Ä–∞–∑–¥–µ–ª–æ–º ¬´–ü—Ä–æ–¥–∞–∫—à–Ω-—Å–±–æ—Ä–∫–∞: Dockerfile + docker-compose.prod.yml¬ª —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∑–∞–ø—É—Å–∫–∞.
- –í—Å–µ unit‚Äë—Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (`yarn test`). –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞: `docs/UNIT_TESTING_PLAN.md`, `docs/ITERATION_TASKS.md`.

## 2025-09-05 ‚Äî –Æ–Ω–∏—Ç‚Äë—Ç–µ—Å—Ç—ã: —Ç–∞–∫—Å–æ–Ω–æ–º–∏–∏ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è

- –î–æ–±–∞–≤–ª–µ–Ω—ã unit‚Äë—Ç–µ—Å—Ç—ã —Å–æ–≥–ª–∞—Å–Ω–æ –ø–ª–∞–Ω—É (–∏—Ç–µ—Ä–∞—Ü–∏—è 4):
  - `src/modules/category/category.service.spec.ts` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–µ—Ä–∞—Ä—Ö–∏–∏ (—Ü–∏–∫–ª), –∑–∞–ø—Ä–µ—Ç —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –¥–µ—Ç–µ–π, –ø—É–±–ª–∏—á–Ω—ã–µ —Ä–µ–∑–æ–ª–≤–µ—Ä—ã —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ —è–∑—ã–∫—É –∏ —Ñ–æ–ª–±—ç–∫–æ–º –Ω–∞ –±–∞–∑–æ–≤—ã–π slug, 404 –ø—Ä–∏ detach –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–µ–π —Å–≤—è–∑–∏.
  - `src/modules/tags/tags.service.spec.ts` ‚Äî –ø—É–±–ª–∏—á–Ω—ã–µ —Ä–µ–∑–æ–ª–≤–µ—Ä—ã: —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —è–∑—ã–∫—É, —Ñ–æ–ª–±—ç–∫ –∫ –±–∞–∑–æ–≤–æ–º—É slug; attach –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–µ–Ω; detach –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–µ–Ω.
- –ó–∞–ø—É—Å–∫ `yarn test` ‚Äî –≤—Å–µ —Ç–µ—Å—Ç—ã –∑–µ–ª—ë–Ω—ã–µ. –û–±–Ω–æ–≤–ª–µ–Ω—ã `docs/UNIT_TESTING_PLAN.md` –∏ `docs/ITERATION_TASKS.md`.

- –û–±–Ω–æ–≤–ª—ë–Ω `.env.example`:
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `PORT`, `HOST` (—Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –¥–µ—Ñ–æ–ª—Ç–∞–º –≤ –∫–æ–¥–µ).
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ `CONTENT_MANAGER_EMAILS` –¥–ª—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è —Ä–æ–ª–∏ `content_manager` –ø–æ —Å–ø–∏—Å–∫—É email.
  - –£—Ç–æ—á–Ω–µ–Ω–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ `LOCAL_PUBLIC_BASE_URL` (SEO/Sitemap vs –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ) –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω–æ–µ dev-–∑–Ω–∞—á–µ–Ω–∏–µ.
  - –û—Å—Ç–∞–≤–ª–µ–Ω—ã –∏ –ø—Ä–æ–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏ –¥–ª—è uploads/cache/rate-limit/CORS.
- README –¥–æ–ø–æ–ª–Ω–µ–Ω –æ–ø–∏—Å–∞–Ω–∏—è–º–∏: `CONTENT_MANAGER_EMAILS`, `CORS_ORIGIN`, —É—Ç–æ—á–Ω–µ–Ω–∏–µ –ø–æ `LOCAL_PUBLIC_BASE_URL`.
- `docs/ITERATION_TASKS.md`: –∑–∞–¥–∞—á–∞ ¬´14. 6 ‚Äî .env.example —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ¬ª –ø–æ–º–µ—á–µ–Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π, –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏.

### –î–æ–ø–æ–ª–Ω–µ–Ω–∏–µ: —Ç–µ—Å—Ç–æ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ

- –î–æ–±–∞–≤–ª–µ–Ω —Ñ–∞–π–ª `.env.test.example` —Å –ø—Ä–∏–º–µ—Ä–æ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–ª—è e2e.
- README –¥–æ–ø–æ–ª–Ω–µ–Ω —Ä–∞–∑–¥–µ–ª–æ–º –ø—Ä–æ `.env.test` –∏ –º–µ—Ö–∞–Ω–∏–∑–º –≤—Ä–µ–º–µ–Ω–Ω–æ–π –ë–î (`PRISMA_TEST_*`).

## 2025-09-06 ‚Äî –Æ–Ω–∏—Ç‚Äë—Ç–µ—Å—Ç—ã: SEO, Sitemap –∏ Public —Ä–µ–∑–æ–ª–≤–µ—Ä—ã

- –î–æ–±–∞–≤–ª–µ–Ω—ã unit‚Äë—Ç–µ—Å—Ç—ã —Å–æ–≥–ª–∞—Å–Ω–æ –ø–ª–∞–Ω—É (–∏—Ç–µ—Ä–∞—Ü–∏—è 6):
  - `src/modules/seo/seo.service.spec.ts` ‚Äî –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã —Ñ–æ–ª–±—ç–∫–∏ –º–µ—Ç–∞/OG/Twitter –∏ canonical:
    - `type=version` ‚Äî canonical –≤—Å–µ–≥–¥–∞ `/versions/:id`, –±–µ–∑ —è–∑—ã–∫–æ–≤–æ–≥–æ –ø—Ä–µ—Ñ–∏–∫—Å–∞ –∏ –±–µ–∑ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏–∑ SEO.
    - `type=book`/`type=page` ‚Äî canonical —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `/:lang`, —è–∑—ã–∫ –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É: path > query > `Accept-Language` > default.
  - `src/modules/sitemap/sitemap.service.spec.ts` ‚Äî `robots.txt`, –∏–Ω–¥–µ–∫—Å sitemap –ø–æ –≤—Å–µ–º —è–∑—ã–∫–∞–º (–∏–∑ Prisma enum `Language`), per-language sitemap (—Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ –∫–Ω–∏–≥–∏), –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ TTL (fake timers), —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å —Å–ª—É–≥–æ–≤ –∫–Ω–∏–≥.
  - `src/modules/pages/pages.service.spec.ts` ‚Äî public resolver —Å –ø–æ–ª–∏—Ç–∏–∫–æ–π —è–∑—ã–∫–∞ –∏ `setStatus` (publish/unpublish), 404 –¥–ª—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π.

## 2025-09-06 ‚Äî –Æ–Ω–∏—Ç‚Äë—Ç–µ—Å—Ç—ã: –ú–µ–¥–∏–∞ –∏ –∑–∞–≥—Ä—É–∑–∫–∏

- –î–æ–±–∞–≤–ª–µ–Ω—ã unit‚Äë—Ç–µ—Å—Ç—ã —Å–æ–≥–ª–∞—Å–Ω–æ –ø–ª–∞–Ω—É (–∏—Ç–µ—Ä–∞—Ü–∏—è 7):

## 2025-09-06 ‚Äî –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: Helmet, CORS, –ª–∏–º–∏—Ç—ã —Ç–µ–ª–∞

- –î–æ–±–∞–≤–ª–µ–Ω —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ `src/common/security/app-security.config.ts` –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤ `main.ts`.
- –í–∫–ª—é—á–µ–Ω—ã Helmet (CSP off –≤ dev), CORS (`CORS_ORIGIN`), –ª–∏–º–∏—Ç—ã –¥–ª—è JSON/URL-encoded (`BODY_LIMIT_JSON|URLENCODED`), raw 110 –ú–ë –¥–ª—è `/api/uploads/direct`, —Å—Ç–∞—Ç–∏–∫–∞ `/static`.
- –û–±–Ω–æ–≤–ª–µ–Ω—ã `.env.example` –∏ README (—Å–µ–∫—Ü–∏—è –ø—Ä–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å).
- –Æ–Ω–∏—Ç‚Äë—Ç–µ—Å—Ç—ã `src/common/security/app-security.config.spec.ts`: –ø—Ä–æ–≤–µ—Ä–∫–∞ security-–∑–∞–≥–æ–ª–æ–≤–∫–æ–≤, CORS preflight –∏ 413 –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ç–µ–ª.

## 2025-09-07 ‚Äî –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥‚Äë–∞–≥–µ–Ω—Ç–æ–≤

- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–∞–ø–∫–∞ `docs/frontend-agents/` —Å –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (Next.js App Router, React Query/SWR, Auth.js):
  - `README.md`, `architecture-and-routing.md`, `auth-next-auth.md`, `data-fetching-and-types.md`,
    `api-cheatsheet.md`, `pages-contracts.md`, `seo.md`, `error-handling.md`, `quickstart.md`.
- –ò—Å—Ç–æ—á–Ω–∏–∫: —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —Å –±—ç–∫–µ–Ω–¥‚Äë–¥–æ–∫–∞–º–∏ `docs/ENDPOINTS.md` –∏ e2e‚Äë—Ç–µ—Å—Ç–∞–º–∏ (i18n/SEO/overview).
- –¶–µ–ª—å: —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ FE‚Äë—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π, —á—Ç–æ–±—ã –ò–ò‚Äë–∞–≥–µ–Ω—Ç—ã –º–æ–≥–ª–∏ –æ–ø–∏—Ä–∞—Ç—å—Å—è –Ω–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –∏ –ø–æ–ª–∏—Ç–∏–∫—É i18n/SEO.
  - `src/modules/uploads/uploads.service.spec.ts` ‚Äî presign (–≤–∞–ª–∏–¥–∞—Ü–∏–∏ CT/—Ä–∞–∑–º–µ—Ä–∞, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è key/token/headers, –∑–∞–ø–∏—Å—å —Ç–æ–∫–µ–Ω–∞ –≤ cache), directUpload (–ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ–∫–µ–Ω–∞/–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è/CT/—Ä–∞–∑–º–µ—Ä–∞, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –æ—á–∏—Å—Ç–∫–∞ —Ç–æ–∫–µ–Ω–∞), delete/publicUrl ‚Äî –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–æ—Ä–∞–¥–∂—É.
  - `src/modules/media/media.service.spec.ts` ‚Äî confirm (–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å, —Å–Ω—è—Ç–∏–µ isDeleted), –æ–±—Ä–∞–±–æ—Ç–∫–∞ P2002 –ø—Ä–∏ –≥–æ–Ω–∫–µ, list —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ q/type –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º deleted, remove ‚Äî soft‚Äëdelete + best‚Äëeffort —É–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞.
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: –æ–±–Ω–æ–≤–ª–µ–Ω—ã `docs/UNIT_TESTING_PLAN.md` (–ø.7 –æ—Ç–º–µ—á–µ–Ω –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–π) –∏ `docs/MEDIA_LIBRARY.md` (—Ä–∞–∑–¥–µ–ª –ø—Ä–æ —Ç–µ—Å—Ç—ã).
- –í—Å–µ unit‚Äë—Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (`yarn test`). –û–±–Ω–æ–≤–ª–µ–Ω—ã: `docs/UNIT_TESTING_PLAN.md` (–∏—Ç–µ—Ä–∞—Ü–∏—è 6 –ø–æ–º–µ—á–µ–Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π, –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–µ—Ç–∞–ª–∏) –∏ –∫—Ä–∞—Ç–∫–∏–µ –ø–æ—è—Å–Ω–µ–Ω–∏—è –≤ `docs/ITERATION_TASKS.md`.

## 2025-09-06 ‚Äî –Æ–Ω–∏—Ç‚Äë—Ç–µ—Å—Ç—ã: —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∏ –∫—ç—à (–∏—Ç–µ—Ä–∞—Ü–∏—è 8)

- –î–æ–±–∞–≤–ª–µ–Ω—ã unit‚Äë—Ç–µ—Å—Ç—ã –¥–ª—è –æ–±—â–∏—Ö —Å–ª–æ—ë–≤ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –∫—ç—à–∞:
  - `src/shared/storage/storage.interface.spec.ts` ‚Äî –∫–æ–Ω—Ç—Ä–∞–∫—Ç StorageService —á–µ—Ä–µ–∑ in‚Äëmemory —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é (save/delete/exists/stat/getPublicUrl, –ø–æ—Ç–æ–∫–æ–≤—ã–π –≤–≤–æ–¥).
  - `src/shared/storage/local.storage.spec.ts` ‚Äî –¥—Ä–∞–π–≤–µ—Ä –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å—Ç–æ—Ä–∞–¥–∂–∞: –∑–∞–ø–∏—Å—å/—á—Ç–µ–Ω–∏–µ/—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ (ENOENT ‚Üí no‚Äëop), –∑–∞—â–∏—Ç–∞ –æ—Ç directory traversal, —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—É–±–ª–∏—á–Ω–æ–≥–æ URL.
  - `src/shared/cache/inmemory.cache.spec.ts` ‚Äî InMemoryCacheService: set/get/del –∏ TTL‚Äë—ç–∫—Å–ø–∏—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ fake timers.
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞: `docs/UNIT_TESTING_PLAN.md` (–ø. 8 –ø–æ–º–µ—á–µ–Ω –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º), `docs/ITERATION_TASKS.md` (—Å—Ç–∞—Ç—É—Å —é–Ω–∏—Ç‚Äë—Ç–µ—Å—Ç–æ–≤ –æ–±–Ω–æ–≤–ª—ë–Ω).
- –†–µ–∑—É–ª—å—Ç–∞—Ç: `yarn test` ‚Äî –≤—Å–µ —Ç–µ—Å—Ç—ã –∑–µ–ª—ë–Ω—ã–µ; –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —É—Å—Ç–æ–π—á–∏–≤—ã –∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º.

## 2025-09-06 ‚Äî –Æ–Ω–∏—Ç‚Äë—Ç–µ—Å—Ç—ã: 9. –ü—Ä–æ—á–µ–µ (Users/Auth/ViewStats/Public)

- –î–æ–±–∞–≤–ª–µ–Ω—ã unit‚Äë—Ç–µ—Å—Ç—ã:
  - `src/modules/users/users.service.spec.ts` ‚Äî me/update/delete (–∫–∞—Å–∫–∞–¥), assign/revoke roles, list —Å–æ staff‚Äë—Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –∏ ENV‚Äë–ø–æ–≤—ã—à–µ–Ω–∏—è–º–∏ —Ä–æ–ª–µ–π.
  - `src/modules/auth/auth.service.spec.ts` ‚Äî register (–∫–æ–Ω—Ñ–ª–∏–∫—Ç email, happy), login (–Ω–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å/—É—Å–ø–µ—Ö), refresh; –º–æ–∫–∏ Jwt/argon2/Config.
  - `src/modules/view-stats/view-stats.service.spec.ts` ‚Äî create (–≤–∞–ª–∏–¥–∞—Ü–∏—è –≤–µ—Ä—Å–∏–∏ –∏ –≤—Ä–µ–º–µ–Ω–∏), aggregate/top —Å in‚Äëmemory –∫—ç—à–µ–º –∏ —Å—É–º–º–æ–π.
  - `src/modules/public/public.controller.spec.ts` ‚Äî –¥–µ–ª–µ–≥–∞—Ü–∏–∏ –∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —è–∑—ã–∫–∞ –ø—É—Ç–∏ –Ω–∞–¥ query/header.
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞: `docs/UNIT_TESTING_PLAN.md` ‚Äî –ø—É–Ω–∫—Ç ¬´9. –ü—Ä–æ—á–µ–µ¬ª –ø–æ–º–µ—á–µ–Ω –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º, –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—á–∞–Ω–∏—è.

## 2025-09-06 ‚Äî –î–æ–ø–æ–ª–Ω–µ–Ω–∏–µ: —Ä–∞—Å—à–∏—Ä–µ–Ω—ã —é–Ω–∏—Ç‚Äë–∫–µ–π—Å—ã

- AuthService: refresh ‚Äî –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π/–ø—Ä–æ—Ç—É—Ö—à–∏–π —Ç–æ–∫–µ–Ω ‚Üí Unauthorized; logout ‚Üí success=true.
- UsersService: assignRole/revokeRole ‚Äî NotFound –¥–ª—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è/—Ä–æ–ª–∏; list ‚Äî –ø–∞–≥–∏–Ω–∞—Ü–∏—è –∏ staff=exclude.
- ViewStatsService: aggregate/top ‚Äî —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ source; –≤–∞–ª–∏–¥–∞—Ü–∏—è from>to; –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ.

## 2025-09-06 ‚Äî Health/Readiness endpoints

- –î–æ–±–∞–≤–ª–µ–Ω `HealthModule` —Å `GET /health/liveness` –∏ `GET /health/readiness`.
- Readiness –ø—Ä–æ–≤–µ—Ä—è–µ—Ç Prisma (`SELECT 1`) –∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ Redis (—á–µ—Ä–µ–∑ –ø—Ä–æ—Å—Ç–æ–π `RedisProbe` –∏–∑ env: `REDIS_URL|REDIS_HOST`). –ï—Å–ª–∏ Redis –Ω–µ —Å–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω ‚Äî `redis: skipped`.
- Liveness –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤; –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `status`, `uptime`, `timestamp`.
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞: `docs/ENDPOINTS.md`, `docs/ITERATION_TASKS.md`.
- Unit‚Äë—Ç–µ—Å—Ç—ã: `src/modules/health/health.service.spec.ts`, `src/modules/health/health.controller.spec.ts` –ø–æ–∫—Ä—ã–≤–∞—é—Ç —Å—Ü–µ–Ω–∞—Ä–∏–∏ up/down/skipped.

## 2025-09-06 ‚Äî Prometheus –º–µ—Ç—Ä–∏–∫–∏

- –î–æ–±–∞–≤–ª–µ–Ω `MetricsModule` —Å `/metrics` –Ω–∞ –æ—Å–Ω–æ–≤–µ `prom-client`.
- –°–æ–±–∏—Ä–∞—é—Ç—Å—è default process‚Äë–º–µ—Ç—Ä–∏–∫–∏ –∏ HTTP‚Äë–≥–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ `http_request_duration_seconds` —Å –ª–µ–π–±–ª–∞–º–∏ `method`, `route`, `status_code`.
- –ì–ª–æ–±–∞–ª—å–Ω—ã–π `MetricsInterceptor` –∏–∑–º–µ—Ä—è–µ—Ç –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –ø—Ä–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å.
- Unit‚Äë—Ç–µ—Å—Ç—ã: `src/modules/metrics/metrics.service.spec.ts`, `src/modules/metrics/metrics.controller.spec.ts`, `src/modules/metrics/metrics.interceptor.spec.ts`.

## 2025-09-06 ‚Äî CI –ø—Ä–æ–≤–∞–π–¥–µ—Ä‚Äë–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π (portable)

- –î–æ–±–∞–≤–ª–µ–Ω —Å–∫—Ä–∏–ø—Ç `scripts/ci.sh`, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ª–∏–Ω—Ç, typecheck, unit‚Äë—Ç–µ—Å—Ç—ã, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ e2e (–ø–æ `CI_E2E=1` –∏ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ `DATABASE_URL`), –∏ —Å–±–æ—Ä–∫—É.
- –í `package.json` –¥–æ–±–∞–≤–ª–µ–Ω —Å–∫—Ä–∏–ø—Ç `ci`; –≤ `Makefile` ‚Äî —Ü–µ–ª—å `ci`; –≤ `.vscode/tasks.json` ‚Äî –∑–∞–¥–∞—á–∞ `ci`.
- –î–æ–±–∞–≤–ª–µ–Ω—ã —à–∞–±–ª–æ–Ω—ã: `.github/workflows/ci.yml` –∏ `.gitlab-ci.yml`, –æ–±–∞ –≤—ã–∑—ã–≤–∞—é—Ç `yarn ci`.
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞: `docs/ITERATION_TASKS.md` (–ø—É–Ω–∫—Ç ¬´11 ‚Äî CI¬ª –ø–æ–º–µ—á–µ–Ω –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º, –¥–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª), README ‚Äî —Ä–∞–∑–¥–µ–ª ¬´CI (portable)¬ª.
