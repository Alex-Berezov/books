# Database
# Default for docker-compose: postgres/postgres@localhost:5432/books
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/books?schema=public"
NODE_ENV=development

# Server
# Port/host for Nest HTTP server (see main.ts). Defaults: PORT=5000, HOST=0.0.0.0
# Leave commented to use code defaults.
# PORT=5000
# HOST=0.0.0.0

# JWT
JWT_ACCESS_SECRET="Some_secret_1!*@#"
JWT_ACCESS_EXPIRES_IN=12h
JWT_REFRESH_SECRET="Some_secret_2!*@#"
JWT_REFRESH_EXPIRES_IN=7d

# Roles
# Comma-separated email lists for automatic role assignment at register/login
ADMIN_EMAILS=admin@example.com
CONTENT_MANAGER_EMAILS=
ROLES_CACHE_TTL_MS=5000

# Language policy
# Default language fallback when not provided and not matched via Accept-Language
# Must be one of Prisma enum Language: en|es|fr|pt (extend via migration when needed)
DEFAULT_LANGUAGE=en

# Public base URL for link generation.
# SEO/Sitemap fallback if undefined: http://localhost:3000,
# local storage (LocalStorageService) fallback: http://localhost:5000.
# Setting this overrides SEO/Sitemap base AND public file links.
LOCAL_PUBLIC_BASE_URL=http://localhost:5000

# --- Compose overrides (optional) ---
# Override ports/settings of services defined in docker-compose.yml
POSTGRES_DB=books
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_PORT=5432
REDIS_PORT=6379

# --- Sentry (optional) ---
# To enable error reporting set DSN (from your Sentry project).
# Integration auto-enables if SENTRY_DSN is set. Force disable: SENTRY_ENABLED=0
# SENTRY_DSN=
# SENTRY_ENV=development
# SENTRY_RELEASE=
# SENTRY_TRACES_SAMPLE_RATE=0
# SENTRY_PROFILES_SAMPLE_RATE=0

# --- BullMQ / Queues (optional) ---
# Redis URL overrides host/port. If neither REDIS_URL nor REDIS_HOST are set queues are disabled.
# Example URL: redis://localhost:6379
# REDIS_URL=
# REDIS_HOST=localhost
# REDIS_PASSWORD=
# BULLMQ_DEMO_QUEUE=demo
# BULLMQ_DEMO_CONCURRENCY=2
# BULLMQ_IN_PROCESS_WORKER=1
# BULLMQ_WORKER_LOG_LEVEL=info
# BULLMQ_WORKER_SHUTDOWN_TIMEOUT_MS=5000

# --- Uploads / limits (optional, defaults exist in code) ---
# LOCAL_UPLOADS_DIR=var/uploads
# UPLOADS_MAX_IMAGE_MB=5
# UPLOADS_MAX_AUDIO_MB=100
# UPLOADS_PRESIGN_TTL_SEC=600
# UPLOADS_ALLOWED_IMAGE_CT=image/jpeg,image/png,image/webp
# UPLOADS_ALLOWED_AUDIO_CT=audio/mpeg,audio/mp4,audio/aac,audio/ogg

# --- Cache / rate limits (optional) ---
# VIEWS_CACHE_TTL_MS=30000
# SITEMAP_CACHE_TTL_MS=60000
# SEO_CACHE_TTL_MS=0
# RATE_LIMIT_ENABLED=0
# RATE_LIMIT_COMMENTS_PER_MINUTE=10
# RATE_LIMIT_COMMENTS_WINDOW_MS=60000
# Global throttling (all requests except health/metrics/swagger)
# RATE_LIMIT_GLOBAL_ENABLED=0
# RATE_LIMIT_GLOBAL_MAX=100
# RATE_LIMIT_GLOBAL_WINDOW_MS=60000

# --- CORS (optional) ---
# Allowed origins. Supports:
#  - wildcard (dev): *
#  - single origin: https://app.example.com
#  - comma list: https://app.example.com,https://admin.example.com
# In production use an explicit whitelist instead of "*".
CORS_ORIGIN=*
# Enable credentialed requests (cookies/Authorization with withCredentials)
# Only with specific origins; do not combine with "*".
# 0 — off (default), 1 — on
CORS_CREDENTIALS=0

# --- Body limits (optional) ---
# BODY_LIMIT_JSON=1mb
# BODY_LIMIT_URLENCODED=1mb

# --- Reverse Proxy (prod) ---
# If app runs behind reverse proxy/ingress enable trust of X-Forwarded-* headers
# 0 — off, 1 — on
TRUST_PROXY=0

# --- Monitoring Stack (optional) ---
# Ports for monitoring services
# PROMETHEUS_PORT=9090
# GRAFANA_PORT=3000
# NODE_EXPORTER_PORT=9100
# ALERTMANAGER_PORT=9093

# Grafana settings
# GRAFANA_ADMIN_USER=admin
# GRAFANA_ADMIN_PASSWORD=admin123
# GRAFANA_DOMAIN=localhost
# GRAFANA_ROOT_URL=http://localhost:3000

# AlertManager notification settings
# ALERT_EMAIL_FROM=alerts@example.com
# ALERT_EMAIL_TO=admin@example.com
# SMTP_HOST=localhost:587
# SMTP_USERNAME=
# SMTP_PASSWORD=

# Slack notifications (optional)
# SLACK_WEBHOOK_URL=
# SLACK_CHANNEL=#alerts