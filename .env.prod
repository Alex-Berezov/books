# Production Environment Variables
# =================================

# Database (продакшн настройки)
DATABASE_URL=postgresql://books_app:74NGgfM121ZvKPxamNTPgCp/YsU=@postgres:5432/books_app?schema=public
NODE_ENV=production

# Server
PORT=5000
HOST=0.0.0.0

# JWT (новые безопасные секреты для продакшена)
JWT_ACCESS_SECRET=Cz+hKqYDZcGyqY4CbJL/s7N/Ay2bCZz3KYHFmzEFGKg=
JWT_ACCESS_EXPIRES_IN=12h
JWT_REFRESH_SECRET=DgNY3VAchGo3+aOK0+xCA7WRS7i1mGZzYPCjYpz+8Ds=
JWT_REFRESH_EXPIRES_IN=7d

# Roles - админ и контент-менеджер emails
ADMIN_EMAILS=admin@example.com
CONTENT_MANAGER_EMAILS=editor@example.com
ROLES_CACHE_TTL_MS=5000

# Language policy
DEFAULT_LANGUAGE=en

# Public URL (будет обновлен после настройки reverse proxy)
LOCAL_PUBLIC_BASE_URL=https://api.example.com/static

# CORS (будет настроен под реальный домен фронтенда)
CORS_ORIGIN=https://frontend.example.com
CORS_CREDENTIALS=0

# Security Settings - КРИТИЧНО для продакшена
SWAGGER_ENABLED=0
RATE_LIMIT_GLOBAL_ENABLED=1
RATE_LIMIT_GLOBAL_MAX=100
RATE_LIMIT_GLOBAL_WINDOW_MS=60000
TRUST_PROXY=1

# Rate limiting для комментариев
RATE_LIMIT_ENABLED=1
RATE_LIMIT_COMMENTS_PER_MINUTE=10
RATE_LIMIT_COMMENTS_WINDOW_MS=60000

# Cache settings
VIEWS_CACHE_TTL_MS=30000
SITEMAP_CACHE_TTL_MS=60000
SEO_CACHE_TTL_MS=0

# Uploads settings
LOCAL_UPLOADS_DIR=var/uploads
UPLOADS_MAX_IMAGE_MB=5
UPLOADS_MAX_AUDIO_MB=100
UPLOADS_PRESIGN_TTL_SEC=600
UPLOADS_ALLOWED_IMAGE_CT=image/jpeg,image/png,image/webp
UPLOADS_ALLOWED_AUDIO_CT=audio/mpeg,audio/mp4,audio/aac,audio/ogg

# Body limits
BODY_LIMIT_JSON=1mb
BODY_LIMIT_URLENCODED=1mb

# Postgres settings for docker-compose
POSTGRES_DB=books_app
POSTGRES_USER=books_app
POSTGRES_PASSWORD=74NGgfM121ZvKPxamNTPgCp/YsU=
POSTGRES_PORT=5432

# Redis (закомментировано - включим позже при необходимости)
# REDIS_HOST=redis
# REDIS_PORT=6379
# BULLMQ_IN_PROCESS_WORKER=0
# BULLMQ_DEMO_QUEUE=demo
# BULLMQ_DEMO_CONCURRENCY=2
# BULLMQ_WORKER_LOG_LEVEL=info
# BULLMQ_WORKER_SHUTDOWN_TIMEOUT_MS=5000

# Sentry (опционально - для мониторинга ошибок)
# SENTRY_DSN=
# SENTRY_ENV=production
# SENTRY_RELEASE=
# SENTRY_TRACES_SAMPLE_RATE=0
# SENTRY_PROFILES_SAMPLE_RATE=0
